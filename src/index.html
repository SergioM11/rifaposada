<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Posada Madata 2024</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@400;700&display=swap" rel="stylesheet">
<style>
     .background-image {
      width: 100%;
      height: 100%; /* Ajusta la altura según tus necesidades */
      background-image: url('https://img3.wallspic.com/previews/7/3/8/0/7/170837/170837-new_year-christmas-christmas_tree-2020-2021-x750.jpg');
      background-size: cover;     /* Ajusta el tamaño del fondo */
      background-position: center; /* Centra la imagen */
      background-repeat: repeat; /* Evita que la imagen se repita */
    }
</style>
</head>
<body class="mat-typography background-image" >
  <div class="snow-container caja26"></div>
  
  <app-root></app-root>
</body>
</html>
<style>
  .snow-container {
    
    position: fixed;
    background-color: rgba(0, 0, 0, 0.027);
    top: 0;
    left: 0;
    overflow: hidden;
    width: 100vw;
    height: 100vh;
    z-index: 99998;
    pointer-events: none;
}

.snowflake {
    position: absolute;
    background-color: white;
    border-radius: 50%;
    opacity: 1;
    pointer-events: none;
    z-index: 99999;
}

@keyframes fall {
    0% {
        opacity: 0;
        transform: translateY(0);
    }
    10% {
        opacity: 1;
    }
    100% {
        opacity: 0.5;
        transform: translateY(100vh);
    }
}

@keyframes diagonal-fall {
    0% {
        opacity: 0;
        transform: translate(0, 0);
    }
    10% {
        opacity: 1;
    }
    100% {
        opacity: 0.25;
        transform: translate(10vw, 100vh);
    }
}
</style>
<link rel="stylesheet" href="https://npmcdn.com/sweetalert2@4.0.15/dist/sweetalert2.min.css">

<script src="https://npmcdn.com/sweetalert2@4.0.15/dist/sweetalert2.min.js"></script>
<script>
 

  const snowContainer = document.querySelector(".snow-container");

  const particlesPerThousandPixels = 0.1;
  const fallSpeed = 1.25;
  const pauseWhenNotActive = true;
  const maxSnowflakes = 200;
  const snowflakes = [];

  let snowflakeInterval;
  let isTabActive = true;

  function resetSnowflake(snowflake) {
      const size = Math.random() * 25 + 1;
      const viewportWidth = window.innerWidth - size; // Adjust for snowflake size
      const viewportHeight = window.innerHeight;

      snowflake.style.width = `${size}px`;
      snowflake.style.height = `${size}px`;
      snowflake.style.left = `${Math.random() * viewportWidth}px`; // Constrain within viewport width
      snowflake.style.top = `-${size}px`;

      const animationDuration = (Math.random() * 3 + 2) / fallSpeed;
      snowflake.style.animationDuration = `${animationDuration}s`;
      snowflake.style.animationTimingFunction = "linear";
      snowflake.style.animationName =
          Math.random() < 0.5 ? "fall" : "diagonal-fall";

      setTimeout(() => {
          if (parseInt(snowflake.style.top, 10) < viewportHeight) {
              resetSnowflake(snowflake);
          } else {
              snowflake.remove(); // Remove when it goes off the bottom edge
          }
      }, animationDuration * 1000);
  }

  function createSnowflake() {
      if (snowflakes.length < maxSnowflakes) {
          const snowflake = document.createElement("div");
          snowflake.classList.add("snowflake");
          snowflakes.push(snowflake);
          // console.log("agregar:: ", snowflake)
          snowContainer.appendChild(snowflake);
          resetSnowflake(snowflake);
      }
  }

  function generateSnowflakes() {
      
      const numberOfParticles =
          Math.ceil((window.innerWidth * window.innerHeight) / 1000) *
          particlesPerThousandPixels;
      const interval = 5000 / numberOfParticles;

      clearInterval(snowflakeInterval);
      snowflakeInterval = setInterval(() => {
          if (isTabActive && snowflakes.length < maxSnowflakes) {
              requestAnimationFrame(createSnowflake);
          }
      }, interval);
  }

  function handleVisibilityChange() {
      console.log("Algo")
      if (!pauseWhenNotActive) return;

      isTabActive = !document.hidden;
      if (isTabActive) {
          generateSnowflakes();
      } else {
          clearInterval(snowflakeInterval);
      }
  }

  generateSnowflakes();

  window.addEventListener("resize", () => {
      clearInterval(snowflakeInterval);
      setTimeout(generateSnowflakes, 1000);
  });

  document.addEventListener("visibilitychange", handleVisibilityChange);

</script>
